var custom_theme_file_frame;jQuery(function(a){jQuery(document).on("click","input.select-img",function(e){var i=a(this),e=(e.preventDefault(),wp.media.controller.Library.extend({defaults:_.defaults({id:"custom-theme-insert-image",title:i.data("uploader_title"),allowLocalEdits:!1,displaySettings:!0,displayUserSettings:!1,multiple:!1,library:wp.media.query({type:"image"})},wp.media.controller.Library.prototype.defaults)}));(custom_theme_file_frame=wp.media.frames.custom_theme_file_frame=wp.media({button:{text:jQuery(this).data("uploader_button_text")},state:"custom-theme-insert-image",states:[new e],multiple:!1})).on("select",function(){var e=custom_theme_file_frame.state("custom-theme-insert-image"),t=e.get("selection"),e=e.display(t.first()).toJSON(),t=t.first().toJSON(),e=wp.media.string.props(e,t),t=i.siblings(".img"),e=e.src;t.val(e),t.trigger("change"),i.siblings(".image-preview-wrap").html('<img src="'+e+'" alt="" style="max-width:100%;max-height:200px;" />'),i.siblings(".btn-image-remove").css("display","inline-block")}),custom_theme_file_frame.open()}),jQuery(document).on("click","input.btn-image-remove",function(e){e.preventDefault();var e=a(this),t=e.siblings(".img");t.val(""),e.siblings(".image-preview-wrap").html(""),e.css("display","none"),t.trigger("change")})});